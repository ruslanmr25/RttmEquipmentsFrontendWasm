@page "/users"


<div class="card fade-in">
     <div class="card-header d-flex justify-content-between text-align-center">


          <h5 class="card-title">
               Foydalanuvchilar
          </h5>

          <div>
               <button class="btn btn-primary">Xodim qo'shish</button>
          </div>



     </div>
     @if (users is null)
     {
          <LoadingComponent />


     }
     else
     {
          <div class="card-body">
               <div class="table-responsive">
                    <table class="table  table-hover">
                         <thead class="table-light">
                              <tr>

                                   <th scope="col">T/r</th>
                                   <th scope="col">F.I.O</th>
                                   <th scope="col">Jihozlar soni</th>
                                   <th scope="col">Lavozimi</th>
                                   <th scope="col">Jihozlari soni</th>
                              </tr>
                         </thead>
                         <tbody>

                              @foreach (User User in users)
                              {

                                   <tr>

                                        <td> @User.Id</td>
                                        <td>@User.FullName</td>
                                        <td>@User.Username</td>
                                        <td>@(User.Position?.Name ?? "Mavjud emas")</td>
                                        <td>@User.EquipmentsCount</td>




                                   </tr>
                              }

                         </tbody>
                    </table>
               </div>


          </div>

     }
</div>

@inject UserClient UserClient

@code {

     protected List<User>? users;

     protected override async Task OnInitializedAsync()
     {


          var response = await UserClient.GetAllAsync();

          users = response.Data ?? new();


     }


}
